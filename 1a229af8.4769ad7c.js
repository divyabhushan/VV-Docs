(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{70:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return u})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return h}));var a=n(3),i=n(7),r=(n(0),n(207)),s=n(208),c=n(209),l=n(210),o=(n(53),{id:"cluster",title:"Multiple Instances of BI Hub",sidebar_label:"Cluster Manager"}),u={unversionedId:"admin-guide/agent-manager/cluster",id:"admin-guide/agent-manager/cluster",isDocsHomePage:!1,title:"Multiple Instances of BI Hub",description:'import "react-medium-image-zoom/dist/styles.css";',source:"@site/docs/admin-guide/agent-manager/cluster.mdx",slug:"/admin-guide/agent-manager/cluster",permalink:"/VV-Docs/docs/admin-guide/agent-manager/cluster",version:"current",sidebar_label:"Cluster Manager",sidebar:"adminGuide",previous:{title:"Row Level Security for Power BI/Onedrive Reports",permalink:"/VV-Docs/docs/admin-guide/agent-manager/agent/row-level-security"},next:{title:"User Manager Welcome Screen",permalink:"/VV-Docs/docs/admin-guide/user-manager/user-manager-main"}},b=[{value:"Pre-requisite",id:"pre-requisite",children:[]},{value:"Create a Cluster",id:"create-a-cluster",children:[]},{value:"Deleting instances of cluster",id:"deleting-instances-of-cluster",children:[]},{value:"Synchronizing users and reports in BI Hub cluster",id:"synchronizing-users-and-reports-in-bi-hub-cluster",children:[]},{value:"Modifying Primary instance of a cluster",id:"modifying-primary-instance-of-a-cluster",children:[]}],d={rightToc:b};function h(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"To ensure high availability or perform load balancing when a large number of concurrent users (excess of 800) use BI Hub, multiple instances of BI Hub agents are required. Two or more instances of the same agent type can be clustered together and they point to the same BI\nplatform. "),Object(r.b)("p",null,"For example, two ",Object(r.b)("em",{parentName:"p"},"Tableau")," agents are created to form a cluster and these two agents point to the same Tableau platform. If one agent fails, the load will be taken by another instance, thus ensuring high availability.\nSimilarly, if a large number of BI Hub concurrent users launch Tableau reports, these two agents perform load balancing. Tying up the two agents to form an agent cluster is accomplished using the BI Hub cluster manager. This BI Hub agent cluster interacts with the cluster/load balancer already setup in the enterprise to handle load balancing/high availability. In fact, the details entered during BI Hub cluster setup such as URL, Port etc., is based on the configuration of\nthe Load Balancer used in the enterprise."),Object(r.b)("h2",{id:"pre-requisite"},"Pre-requisite"),Object(r.b)("p",null,"To create a Cluster, the agents should not have any users mapped to them.\nOr in other words, you can only create clusters on one or more newly created instances."),Object(r.b)("h2",{id:"create-a-cluster"},"Create a Cluster"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Configure the nginx conf file to include the instances to be clustered and the cluster port number.")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Go to the Server location ",Object(r.b)("inlineCode",{parentName:"p"},"C:\\nginx-1.14.2\\nginx-1.15.12\\conf"),", and open ",Object(r.b)("inlineCode",{parentName:"p"},"nginx.conf")," file.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"In the ",Object(r.b)("inlineCode",{parentName:"p"},"http")," section, enter the instances ",Object(r.b)("inlineCode",{parentName:"p"},"<url>:<port number>")," to be clustered."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json",metastring:'title="nginx.conf" {3,4}',title:'"nginx.conf"',"{3,4}":!0}),""))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"In the ",Object(r.b)("inlineCode",{parentName:"p"},"server"),' section, give the port number for the Cluster in the same sequence as that of the Instance port number.\nThis port number is used in the BI Hub "Add Cluster" form.'))),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Create a Cluster of the instances in BI Hub")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"In the ",Object(r.b)("strong",{parentName:"li"},"Agent Manager > Cluster Manager")," screen, click ",Object(r.b)("strong",{parentName:"li"},"Add Cluster"),"."),Object(r.b)("li",{parentName:"ul"},"Enter"),Object(r.b)("li",{parentName:"ul"},"Click Submit")),Object(r.b)("h2",{id:"deleting-instances-of-cluster"},"Deleting instances of cluster"),Object(r.b)("p",null,"Instances of cluster are same as other agent instances and the ",Object(r.b)("strong",{parentName:"p"},"Agent Manager > Instance Manager")," lists those instances, with the primary instance marked with an asterisk. BI Hub enables the administrator to delete the instances and/or add new instances to the cluster. The deletion step happens in the ",Object(r.b)("strong",{parentName:"p"},"Agent Manager > Instance Manager")," by selecting the instance and clicking delete and adding new instances to the cluster happens in Cluster Manager as indicated in Section ",Object(r.b)(c.a,{to:Object(s.a)("docs/admin-guide/admin-functions/multiple-instances/modify-prim-instance"),mdxType:"Link"},"Modifying Primary instance of a cluster"),". If the Primary is deleted, BI Hub automatically makes the secondary instance as Primary and it is the responsibility of\nthe administrator to add a second instance to the cluster."),Object(r.b)("div",{class:"center"},Object(r.b)(l.a,{mdxType:"Zoom"},Object(r.b)("img",{alt:"Cluster Instances",src:Object(s.a)("doc-images/admin-guide/admin-functions/mult-instances/delete-instance.png")})),Object(r.b)("p",null,"Cluster Instances")),Object(r.b)("h2",{id:"synchronizing-users-and-reports-in-bi-hub-cluster"},"Synchronizing users and reports in BI Hub cluster"),Object(r.b)("p",null,"The Agent Manager contains definition of the agent instances.\nFor example, TableauPrimary and TableauFallback are two Tableau instances and they belong to an agent named as Tableau.\nBoth the Tableau agent instances point to the same Tableau BI platform as illustrated by the Tableau Server URL in the Agent Instance definition page.\nSo, the agent is a logical group of agent instances and is used to Synchronize Users and Reports. Activities such as Report synchronization, User synchronization can be executed at the Agent level or in the Instance level by selecting the Primary instance only.\nWhen the secondary instance is chosen, Sync Reports and Sync Users are not available."),Object(r.b)("h2",{id:"modifying-primary-instance-of-a-cluster"},"Modifying Primary instance of a cluster"),Object(r.b)("p",null,"Cluster is a grouping of agent instances for performance, availability\nand load-balancing purposes. Using the above-mentioned tableau\ninstances, TableauPrimary and TableauFallback, a cluster called\nTableauCluster is created. When the cluster is selected in the Cluster\nManager page, the Cluster details tab shows the Primary instance and the\nother instances are secondary/fallback."),Object(r.b)("div",{class:"center"},Object(r.b)(l.a,{mdxType:"Zoom"},Object(r.b)("img",{alt:"Edit Cluster",src:Object(s.a)("doc-images/admin-guide/admin-functions/mult-instances/clusters.jpg")})),Object(r.b)("p",null,"Edit Cluster")),Object(r.b)("p",null,"BI Hub administrator can modify this definition of cluster use the steps below:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Click on the Edit icon on the Cluster Details tab shown above to launch the Edit Cluster\npage and further click on the Manage Clusters page. Primary instance of the agent is marked green tick on the left top of the instance. The other instance can be made primary\nby clicking the check box on the left top. "),Object(r.b)("li",{parentName:"ol"},"Click Save, Submit. BI Hub will treat the selected instance as the Primary and this can\nbe visualized in the Cluster Details tab.")),Object(r.b)("p",null,"Users wouldn\u2019t even notice this re-definition of cluster and they can continue to launch reports, dashboards."))}h.isMDXComponent=!0}}]);